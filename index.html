<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>MineSweepAR</title>
    <meta name="description" content="MineSweepAR">
    <script src="https://aframe.io/releases/1.4.0/aframe.js"></script>
    <script src="https://cdn.rawgit.com/elbobo/aframe-multisrc-component/b6d23310/dist/0.3/aframe-multisrc-component.js"></script>
    <script type="module"  src="minesweeper.js"></script>
  </head>
  <body>
    <a-scene webxr="requiredFeatures: hit-test,local-floor;
        optionalFeatures: dom-overlay,unbounded;
        overlayElement: #overlay;"
        inspector="url: https://cdn.jsdelivr.net/gh/aframevr/aframe-inspector@master/dist/aframe-inspector.min.js">
      <a-assets>
        <img id="groundTexture" src="https://cdn.aframe.io/a-painter/images/floor.jpg" crossorigin="anonymous">
        <img id="skyTexture" src="https://cdn.aframe.io/a-painter/images/sky.jpg" crossorigin="anonymous">
        <img id="face_down" src="images/face_down.png" crossorigin="anonymous">
        <img id="face_limbo" src="images/face_limbo.png" crossorigin="anonymous">
        <img id="face_lose" src="images/face_lose.png" crossorigin="anonymous">
        <img id="face_up" src="images/face_up.png" crossorigin="anonymous">
        <img id="face_win" src="images/face_win.png" crossorigin="anonymous">
        <img id="face_down" src="images/face_down.png" crossorigin="anonymous">

        <img id="flag" src="images/flag.png" crossorigin="anonymous">
        <img id="mine_hit" src="images/mine_hit.png" crossorigin="anonymous">
        <img id="mine_marked" src="images/mine_marked.png" crossorigin="anonymous">
        <img id="mine" src="images/mine.png" crossorigin="anonymous">

        <img id="clear" src="images/clear.png" crossorigin="anonymous">
        <img id="hidden" src="images/hidden.png" crossorigin="anonymous">
        <img id="tile1" src="images/tile_1.png" crossorigin="anonymous">
        <img id="tile2" src="images/tile_2.png" crossorigin="anonymous">
        <img id="tile3" src="images/tile_3.png" crossorigin="anonymous">
        <img id="tile4" src="images/tile_4.png" crossorigin="anonymous">
        <img id="tile5" src="images/tile_5.png" crossorigin="anonymous">
        <img id="tile6" src="images/tile_6.png" crossorigin="anonymous">
        <img id="tile7" src="images/tile_7.png" crossorigin="anonymous">
        <img id="tile8" src="images/tile_8.png" crossorigin="anonymous">
      </a-assets>
        
      <a-camera>
        <a-cursor fuse="false"></a-cursor>
        <a-entity id="hud" position="0 0 -0.5" opacity=".6" scale=".3 .3 .3" align="center">
          <a-text id="remainingMineCount" value="--" font="fonts/7Segment-msdf.json" color="red" negate="false" position="-.05 1 0" align="right"></a-text>
          <a-text value=" | " font="fonts/7Segment-msdf.json" color="red" negate="false" position="0 1 0" align="center"></a-text>
          <a-text id="timer" font="fonts/7Segment-msdf.json" color="red" negate="false" value="000" position=".05 1 0" align="left"></a-text>
        </a-entity>
      </a-camera> 
      
      <a-entity id="leftHand" hand-tracking-controls="hand: left;"></a-entity>
      <a-entity id="rightHand" hand-tracking-controls="hand: right;"></a-entity>

      

      <!-- Primitives. -->
      <a-entity game-board position="0 0 -3" scale=".25 .5 .25">
        <a-box id="smiley" smiley multisrc="src2:#face_up;" scale="1 .3 1" position="0 .15 0" color="grey"></a-box>
        <a-box id="smiley" smiley multisrc="src2:#face_up;" scale="1 .3 1" position="0 .15 0" color="grey"></a-box>
        <a-entity id="minefield" position="0 0 1"> 
          <!-- TODO: Figure out why the above can't be moved in JS
            <a-box multisrc="src2:#hidden;" scale="1 .3 1" position="0 .15 0" color="grey" tile></a-box> -->
        </a-entity>

      </a-entity>
      
      
      
      
      <!-- Background sky. -->
      <a-sky height="2048" radius="30" src="#skyTexture" theta-length="90" width="2048"></a-sky>

      <!-- Ground. -->
      <a-circle src="#groundTexture" rotation="-90 0 0" radius="32"></a-circle>

      
    </a-scene>
  </body>
</html>
